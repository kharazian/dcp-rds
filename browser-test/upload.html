<!doctype html>
<!-- @file      browser-test/upload.html
  --            Web page which allows to exercise the upload method of the slice server.
  -- @author    Wes Garland, wes@kingsds.network
  -- @date      Oct 2021
  -->
<html>
  <head>
    <meta charset="utf-8">
    <title>DCP slice server test: upload</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://portal.distributed.computer/bravojs/bravo.js"></script>
    <base href="http://wes.office.kingsds.network:3521">
  </head>
  <body onload="module.main.init()">
    <h3>This page lets you upload one element of the input set</h3>
    <form action="/methods/upload" method="post">
      <p><label><span>job identifier:     </span><input type=text name="job"></label>   (optional)</p>
      <p><label><span>slice identifier:   </span><input type=text name="slice"></label> (optional)</p>
      <p><label><span>slice datum:        </span><textarea        name="datum"></textarea></p>
      <p><label><span>content type:       </span><select          name="contentType"></select> <button>Upload</button></p>
    </form>
    <br><br>
    <form action="/methods/upload" method="post" enctype="multipart/form-data">
      <p><label><span>job identifier:     </span><input type=text name="job"></label> (optional)</p>
      <p><label><span>slice identifier:   </span><input type=text name="slice"></label> (optional)</p>
      <p><label><span>slice datum:        </span><input type=file name="datum"></p>
      <p><label><span>content type:       </span><select name="contentType"></select> <button>Upload</button></p>
    </form>
  </body>
  <script>'use strict';
/** Main Module */
module.declare([], function(require, exports, module)
{
  exports.init = function init()
  {
    var els = document.querySelectorAll('SELECT[name="contentType"]');

    for (let el of els)
    {
    console.log(el);
      for (let ct of ['text/plain', 'application/json', 'application/x-kvin', 'application/octet-stream'])
      {
        let option = new Option(ct);
        el.options[el.options.length++] = option;
      }
    }
  }
});
    </script>
</html>
